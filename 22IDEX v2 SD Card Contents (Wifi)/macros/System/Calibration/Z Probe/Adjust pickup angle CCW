if global.probePickAngle < 180
  set global.probePickAngle = global.probePickAngle + 1
else
  echo "Reached maximum of 180 degrees"
  M99

M280 P0 S{global.probePickAngle}     ; Move probe holder to the 'pick/place' position
; Generate pickupangle.g
echo >"essential/autogen/pickupangle.g" "; THIS FILE IS AUTOGENERATED !"
echo >>"essential/autogen/pickupangle.g" "; Please edit contents of '/macros/System/Calibration/Z Probe/Adjust pickup angle'"
echo >>"essential/autogen/pickupangle.g" "; Set Z-Probe servo angle"
echo >>"essential/autogen/pickupangle.g" "if exists(global.probePickAngle)"
echo >>"essential/autogen/pickupangle.g" "  set global.probePickAngle = "^{global.probePickAngle}
echo >>"essential/autogen/pickupangle.g" "else"
echo >>"essential/autogen/pickupangle.g" "  global probePickAngle = "^{global.probePickAngle}


echo "New active pick/place angle: "^{global.probePickAngle}